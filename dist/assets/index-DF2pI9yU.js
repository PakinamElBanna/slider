(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const m=["/images/image0.jpg","/images/image1.jpg","/images/image2.jpg","/images/image3.jpg"],O=["/images/fallback-1.jpg","/images/fallback-2.jpg","/images/fallback-3.jpg","/images/fallback-4.jpg"];function P(e,i,o,n,t,r){const l=i.width/i.height,u=t/r;let c,d;l>u?(c=t,d=t/l):(c=r*l,d=r);const h=o+(t-c)/2,p=n+(r-d)/2;e.drawImage(i,0,0,i.width,i.height,h,p,c,d)}function b(e,i,o,n,t){e.fillStyle="#333333",e.textAlign="center",e.textBaseline="middle",e.font="16px Arial",e.fillText("Failed to load image",i+n/2,o+t/2)}async function R(e,i,o,n=3){return new Promise(t=>{const r=(l,u)=>{const c=new Image;c.src=u?o[e]:i[e],c.onload=()=>{t(c)},c.onerror=()=>{l>0?(console.warn(`Retrying to load image at index ${e}: ${i[e]} (${n-l+1} attempt)`),r(l-1,u)):u?(console.error(`Failed to load image at index ${e}: ${o[e]} (fallback)`),t(null)):(console.warn(`Switching to fallback for index ${e}`),r(n,!0))}};r(n)})}function A(e,i,o,n){const t=window.devicePixelRatio||1;return(!e.style.width||!e.style.height)&&(e.style.width=o+"px",e.style.height=n+"px"),e.width=o*t,e.height=n*t,i.setTransform(1,0,0,1,0,0),i.scale(t,t),{width:o,height:n}}function C(e,i){return{minOffsetX:-(e-1)*i,maxOffsetX:0}}function v(e,i){return Math.floor(-e/i)}function j(e,i,o){const n=Math.floor(-e/i),t=Math.min(n+2,o-1);return{startSlideIndex:n,endSlideIndex:t}}function x(){let e=!1;return function(o){e||(e=!0,requestAnimationFrame(()=>{try{o()}catch(n){throw n}finally{e=!1}}))}}function M(e,i,o,n=3){i.forEach(t=>{(t<o-n||t>o+n)&&(delete e[t],i.delete(t))})}function $(e,i,o){return[e,e+1,e+2].filter(n=>n>=0&&n<i&&!o.has(n))}function B(){const e=document.getElementById("slider");if(!e){console.error("Canvas element with id 'slider' not found");return}const i=e.getContext("2d",{alpha:!1}),o=5;let n,t,r,l,u=[],c=new Set,d=0,h=0,p=!1;const w=x();function X(){({minOffsetX:r,maxOffsetX:l}=C(m.length,n))}function y(){i.fillStyle="lightgray",i.fillRect(0,0,n,t);const{startSlideIndex:a,endSlideIndex:f}=j(d,n,m.length);for(let s=a;s<=f;s++){if(s<0||s>=m.length)continue;const g=s*n+d,L=u[s];L?P(i,L,g,0,n,t):c.has(s)&&b(i,g,0,n,t)}}async function I(a){const f=$(a,m.length,c),s=await Promise.all(f.map(g=>R(g,m,O)));f.forEach((g,L)=>{const E=s[L];u[g]=E,c.add(g)}),w(()=>y()),M(u,c,a)}async function S(){const a=u[0]||await R(0,m,O);if(!a)return;const f=a.width/a.height;n=e.getBoundingClientRect().width,t=n/f,A(e,i,n,t),n=e.clientWidth,t=e.clientHeight,X(),w(()=>y())}S(),window.addEventListener("resize",S),I(0),e.addEventListener("pointerdown",a=>{p=!0,h=a.clientX,e.setPointerCapture(a.pointerId),e.focus()}),e.addEventListener("pointermove",a=>{if(!p)return;const f=a.clientX-h;if(Math.abs(f)<o)return;const s=d+f;if(s>l||s<r)return;d=s,h=a.clientX;const g=v(d,n);I(g),w(()=>y())}),e.addEventListener("pointerup",a=>{p=!1,e.releasePointerCapture(a.pointerId)}),e.addEventListener("pointercancel",a=>{p=!1,e.releasePointerCapture(a.pointerId)}),window.addEventListener("keydown",a=>{if(document.activeElement===e){if(a.key==="ArrowRight"){const f=v(d,n),s=Math.min(f+1,m.length-1);d=-s*n,I(s),w(()=>y())}else if(a.key==="ArrowLeft"){const f=v(d,n),s=Math.max(f-1,0);d=-s*n,I(s),w(()=>y())}}})}B();
